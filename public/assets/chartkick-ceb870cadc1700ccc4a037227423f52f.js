(function(){"use strict";function n(n){return Object.prototype.toString.call(n)==="[object Array]"}function t(n){return n instanceof Object}function e(i,a){var r;for(r in a)t(a[r])||n(a[r])?(t(a[r])&&!t(i[r])&&(i[r]={}),n(a[r])&&!n(i[r])&&(i[r]=[]),e(i[r],a[r])):a[r]!==void 0&&(i[r]=a[r])}function i(n,t){var i={};return e(i,n),e(i,t),i}function a(n){var t,e,i,a,r,o,c,l,u,s,d;return s=Object.prototype.toString.call(n),"[object Date]"===s?n:"[object String]"===s?(i=n.match(j))?(d=parseInt(i[1],10),o=parseInt(i[3],10)-1,t=parseInt(i[5],10),e=parseInt(i[7],10),r=i[9]?parseInt(i[9],10):0,u=i[11]?parseInt(i[11],10):0,a=i[12]?parseFloat(k+i[12].slice(1))*1e3:0,l=Date.UTC(d,o,t,e,r,u,a),i[13]&&i[14]&&(c=i[15]*60,i[17]&&(c+=parseInt(i[17],10)),c*=i[14]==="-"?-1:1,l-=1e3*60*c),new Date(l)):void 0:void 0}function r(n){var t,e,i;for(t=0;t<n.length;t++)for(i=n[t].data,e=0;e<i.length;e++)if(i[e][1]<0)return!0;return!1}function o(n,t,e,a){return function(o,c,l){var u=i({},n);return u=i(u,l||{}),c.hideLegend&&t(u),"min"in c?e(u,c.min):r(o)||e(u,0),"max"in c&&a(u,c.max),u=i(u,c.library||{})}}function c(n,t){document.body.innerText?n.innerText=t:n.textContent=t}function l(n,t){c(n,"Error Loading Chart: "+t),n.style.color="#ff0000"}function u(n,t,e){$.ajax({dataType:"json",url:t,success:e,error:function(t,e,i){var a="string"==typeof i?i:i.message;l(n,a)}})}function s(n,t,e,i){try{i(n,t,e)}catch(a){throw l(n,a.message),a}}function d(n,t,e,i){"string"==typeof t?u(n,t,function(t){s(n,t,e,i)}):s(n,t,e,i)}function f(n){return""+n}function h(n){return parseFloat(n)}function g(n){if("object"!=typeof n)if("number"==typeof n)n=new Date(1e3*n);else{var t=n.replace(/ /,"T").replace(" ","").replace("UTC","Z");n=a(t)||new Date(n)}return n}function p(t){if(!n(t)){var e,i=[];for(e in t)t.hasOwnProperty(e)&&i.push([e,t[e]]);t=i}return t}function v(n,t){return n[0].getTime()-t[0].getTime()}function w(t,e,i){var a,r,o,c,l;for(!n(t)||typeof t[0]!="object"||n(t[0])?(t=[{name:"Value",data:t}],e.hideLegend=!0):e.hideLegend=!1,a=0;a<t.length;a++){for(o=p(t[a].data),c=[],r=0;r<o.length;r++)l=o[r][0],l=i?g(l):f(l),c.push([l,h(o[r][1])]);i&&c.sort(v),t[a].data=c}return t}function m(n,t,e){z(n,w(t,e,!0),e)}function y(n,t,e){T(n,w(t,e,!1),e)}function x(n,t,e){var i,a=p(t);for(i=0;i<a.length;i++)a[i]=[f(a[i][0]),h(a[i][1])];S(n,a,e)}function b(n,t,e){L(n,w(t,e,!1),e)}function C(n,t,e){O(n,w(t,e,!0),e)}function A(n,t,e,i){"string"==typeof n&&(n=document.getElementById(n)),d(n,t,e||{},i)}var z,S,T,L,O,j=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,k=String(1.5).charAt(1);if("Highcharts"in window){var D={chart:{},xAxis:{labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},series:{marker:{}}}},I=function(n){n.legend.enabled=!1},E=function(n,t){n.yAxis.min=t},W=function(n,t){n.yAxis.max=t},H=o(D,I,E,W);z=function(n,t,e,i){i=i||"spline";var a={};"areaspline"===i&&(a={plotOptions:{areaspline:{stacking:"normal"},series:{marker:{enabled:!1}}}});var r,o,c,l=H(t,e,a);for(l.xAxis.type="datetime",l.chart.type=i,l.chart.renderTo=n.id,o=0;o<t.length;o++){for(r=t[o].data,c=0;c<r.length;c++)r[c][0]=r[c][0].getTime();t[o].marker={symbol:"circle"}}l.series=t,new Highcharts.Chart(l)},S=function(n,t,e){var a=i(D,e.library||{});a.chart.renderTo=n.id,a.series=[{type:"pie",name:"Value",data:t}],new Highcharts.Chart(a)},T=function(n,t,e,i){i=i||"column";var a,r,o,c,l=H(t,e),u=[];for(l.chart.type=i,l.chart.renderTo=n.id,a=0;a<t.length;a++)for(o=t[a],r=0;r<o.data.length;r++)c=o.data[r],u[c[0]]||(u[c[0]]=new Array(t.length)),u[c[0]][a]=c[1];var s=[];for(a in u)u.hasOwnProperty(a)&&s.push(a);l.xAxis.categories=s;var d=[];for(a=0;a<t.length;a++){for(c=[],r=0;r<s.length;r++)c.push(u[s[r]][a]||0);d.push({name:t[a].name,data:c})}l.series=d,new Highcharts.Chart(l)},L=function(n,t,e){T(n,t,e,"bar")},O=function(n,t,e){z(n,t,e,"areaspline")}}else if("google"in window){var P=!1;google.setOnLoadCallback(function(){P=!0}),google.load("visualization","1.0",{packages:["corechart"]});var V=function(n){google.setOnLoadCallback(n),P&&n()},D={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},I=function(n){n.legend.position="none"},E=function(n,t){n.vAxis.viewWindow.min=t},W=function(n,t){n.vAxis.viewWindow.max=t},B=function(n,t){n.hAxis.viewWindow.min=t},U=function(n,t){n.hAxis.viewWindow.max=t},H=o(D,I,E,W),F=function(n,t){var e=new google.visualization.DataTable;e.addColumn(t,"");var i,a,r,o,c,l=[];for(i=0;i<n.length;i++)for(r=n[i],e.addColumn("number",r.name),a=0;a<r.data.length;a++)o=r.data[a],c="datetime"===t?o[0].getTime():o[0],l[c]||(l[c]=new Array(n.length)),l[c][i]=h(o[1]);var u=[];for(i in l)l.hasOwnProperty(i)&&u.push(["datetime"===t?new Date(h(i)):i].concat(l[i]));return"datetime"===t&&u.sort(v),e.addRows(u),e},G=function(n){window.attachEvent?window.attachEvent("onresize",n):window.addEventListener&&window.addEventListener("resize",n,!0),n()};z=function(n,t,e){V(function(){var i=H(t,e),a=F(t,"datetime"),r=new google.visualization.LineChart(n);G(function(){r.draw(a,i)})})},S=function(n,t,e){V(function(){var a={chartArea:{top:"10%",height:"80%"}},r=i(i(D,a),e.library||{}),o=new google.visualization.DataTable;o.addColumn("string",""),o.addColumn("number","Value"),o.addRows(t);var c=new google.visualization.PieChart(n);G(function(){c.draw(o,r)})})},T=function(n,t,e){V(function(){var i=H(t,e),a=F(t,"string"),r=new google.visualization.ColumnChart(n);G(function(){r.draw(a,i)})})},L=function(n,t,e){V(function(){var i={hAxis:{gridlines:{color:"#ccc"}}},a=o(D,I,B,U)(t,e,i),r=F(t,"string"),c=new google.visualization.BarChart(n);G(function(){c.draw(r,a)})})},O=function(n,t,e){V(function(){var i={isStacked:!0,pointSize:0,areaOpacity:.5},a=H(t,e,i),r=F(t,"datetime"),o=new google.visualization.AreaChart(n);G(function(){o.draw(r,a)})})}}else z=S=T=L=O=function(){throw new Error("Please install Google Charts or Highcharts")};var R={LineChart:function(n,t,e){A(n,t,e,m)},PieChart:function(n,t,e){A(n,t,e,x)},ColumnChart:function(n,t,e){A(n,t,e,y)},BarChart:function(n,t,e){A(n,t,e,b)},AreaChart:function(n,t,e){A(n,t,e,C)}};window.Chartkick=R})();